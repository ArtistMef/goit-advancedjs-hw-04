{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// pixabay-api.js\nimport axios from 'axios';\n\nconst PER_PAGE = 15;\nconst API_KEY = '45505943-42661f72ea61112ff146e0896';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&per_page=${PER_PAGE}&page=${page}`;\n    \n\n    try {\n        const response = await axios.get(url);\n        return {\n            images: response.data.hits,\n            totalHits: response.data.totalHits,\n        };\n    }\n    catch (error) {\n        throw new Error('Error fetching images');\n    }\n    \n}\n","// render-functions.js\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox = new SimpleLightbox('.gallery a');\n\nexport function renderImages(images, clear = true) {\n    const gallery = document.querySelector('.gallery');\n\n    if (clear) {\n        gallery.innerHTML = '';\n    }\n\n    const markup = images.map(image => {\n        return `\n            <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n                <ul class=\"info\">\n                    <li class=\"gallery-info-item\">\n                        <strong>Likes</strong>\n                        <span>${image.likes}</span>\n                    </li>\n                    <li class=\"gallery-info-item\">\n                        <strong>Views</strong>\n                        <span>${image.views}</span>\n                    </li>\n                    <li class=\"gallery-info-item\">\n                        <strong>Comments</strong>\n                        <span>${image.comments}</span>\n                    </li>\n                    <li class=\"gallery-info-item\">\n                        <strong>Downloads</strong>\n                        <span>${image.downloads}</span>\n                    </li>\n                </ul>\n            </a>\n        `;\n    }).join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    lightbox.refresh();\n\n\n}\n\nexport function renderError(message) {\n    iziToast.error({\n        title: 'Error',\n        message: message,\n        position: 'topRight',\n    });\n}\n\nexport function renderNoResults() {\n    iziToast.info({\n        title: 'No results',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n    });\n}\n\nexport function showLoadingIndicator() {\n    document.querySelector('.loading-indicator').classList.remove('hidden');\n}\n\nexport function hideLoadingIndicator() {\n    document.querySelector('.loading-indicator').classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n    document.querySelector('.load-more').classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n    document.querySelector('.load-more').classList.add('hidden');\n}","// main.js\nimport { fetchImages } from './js/pixabay-api.js';\nimport { renderImages, renderError, renderNoResults, showLoadingIndicator, hideLoadingIndicator, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions.js';\n\nconst searchForm = document.querySelector('#search-form');\nconst searchInput = document.querySelector('#search-input');\nconst loadMoreButton = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nsearchForm.addEventListener('submit', async (event) => {\n    event.preventDefault();\n\n    currentQuery = searchInput.value.trim();\n    currentPage = 1;\n\n    if (!currentQuery) {\n        renderError('Please enter a search query.');\n        return;\n    }\n    hideLoadMoreButton();\n    showLoadingIndicator();\n\n    try {\n        const { images, totalHits: hits } = await fetchImages(currentQuery, currentPage);\n        totalHits = hits;\n        hideLoadingIndicator();\n\n        if (images.length === 0) {\n            renderImages([]);\n            renderNoResults();\n        } else {\n            renderImages(images);\n            if (images.length < totalHits) {\n                showLoadMoreButton();\n            }\n        }\n    } catch (error) {\n        hideLoadingIndicator();\n        renderError('An error occurred while fetching images. Please try again later.');\n    }\n});\n\nloadMoreButton.addEventListener('click', async () => {\n    currentPage += 1;\n    showLoadingIndicator();\n\n    try {\n        const { images } = await fetchImages(currentQuery, currentPage);\n        hideLoadingIndicator();\n\n        renderImages(images, false); \n\n        const galleryItems = document.querySelectorAll('.gallery-item');\n        const loadedImagesCount = galleryItems.length;\n\n        const lastItem = galleryItems[galleryItems.length - 1];\n        const cardHeight = lastItem.getBoundingClientRect().height;\n\n        setTimeout(() => {\n            window.scrollBy({\n                top: cardHeight * 2,\n                behavior: 'smooth',\n            });\n        }, 100);\n\n        if (loadedImagesCount >= totalHits) {\n            hideLoadMoreButton();\n            renderError(\"We're sorry, but you've reached the end of search results.\");\n        }\n    } catch (error) {\n        hideLoadingIndicator();\n        renderError('An error occurred while fetching more images. Please try again later.');\n    }\n});\n\n\n"],"names":["PER_PAGE","API_KEY","BASE_URL","fetchImages","query","page","url","response","axios","lightbox","SimpleLightbox","renderImages","images","clear","gallery","markup","image","renderError","message","iziToast","renderNoResults","showLoadingIndicator","hideLoadingIndicator","showLoadMoreButton","hideLoadMoreButton","searchForm","searchInput","loadMoreButton","currentPage","currentQuery","totalHits","event","hits","galleryItems","loadedImagesCount","cardHeight"],"mappings":"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"}